{% extends "enupalslider/_layouts/base" %}
{% import "_includes/forms" as forms %}

{% set crumbs = [
	{ label: "Sliders"|t, url: url('enupalslider/sliders') }
] %}

{% set title = sliderId ? 'Edit Slider' : 'New Slider' %}

{% set fullPageForm = true %}
{% set saveShortcutRedirect = continueEditingUrl %}

{% set saveButton %}
	<input type="hidden" name="action" value="enupalslider/sliders/save-slider">
	{{ redirectInput('enupalslider/sliders') }}
	<input type="hidden" id="sliderId" name="id" value="{{ slider.id is defined ? slider.id : '' }}">

	<div class="btngroup submit first">
		<input type="submit" class="btn submit" value="{{ 'Save'|t('enupalslider') }}">
		{% if slider.id != null %}
		<div class="btn submit menubtn"></div>
		<div class="menu">
			<ul>
				<li><a class="formsubmit" data-redirect="{{('enupalslider/sliders/edit/'~slider.id)|hash}}">{{ "Save and continue editing"|t }} <span class="shortcut">âŒ˜S</span></a></li>
				<li><a class="formsubmit" data-redirect="{{'enupalslider/sliders/edit/'~slider.id|hash}}" data-param='saveAsNew' data-value="true">{{ "Save as a new slider"|t('enupalslider') }}</a></li>
			</ul>
		</div>
		{% endif %}
	</div>
{% endset %}

{% block main %}

	<input type="hidden" name="action" value="enupalslider/sliders/save-slider">
	<input type="hidden" name="handle" value="{{ slider.handle }}">
	<input type="hidden" name="sliderId" value="{{ sliderId }}">

	{% if namespace is not defined %}{% set namespace = 'fields' %}{% endif %}

	<div class="grid first" data-max-cols="3">
		<div class="item" data-position="left" data-min-colspan="2" data-max-colspan="3">
			<div id="fields" class="pane">

				{{ forms.field({
					label: 'Slides'|t('enupalslider'),
					instructions: 'Slides that represents your content that will display in the slider. Double click if you want add HTML instead.'|t('enupalslider'),
					id: 'enupalslider-images',
					}, forms.elementSelect({
					elements: slider.slides,
					sourceElementId: slider.slides,
					elementType: elementType,
					id: 'images',
					name: 'images',
					jsClass: 'Craft.AssetSelectInput',
					addButtonLabel: 'Select Image'|t('enupalslider'),
					limit: null,
					viewMode: 'large',
					criteria: {siteId : null}
				})) }}
				{#limit: 1,
					criteria: {"localeEnabled":null}
					#}

			</div>
		</div>
		<div class="item" data-position="right" data-colspan="1">
			<div class="pane meta">

				{{ forms.textField({
					label: "Name"|t('enupalslider'),
					id: 'name',
					name: 'name',
					value: slider.name,
					errors: slider.getErrors('name')
				}) }}

				{{ forms.textField({
					label: "Handle"|t('enupalslider'),
					id: 'handle',
					name: 'handle',
					value: slider.handle,
					errors: slider.getErrors('handle')
				}) }}

				<div class="field" id="enabled-field">
					<div class="heading"></div>
					<div class="input">
						<div class="right">
							<input type="button" class="btn small formsubmit" value="Delete" data-action="enupalslider/entries/delete-slider" data-confirm="Are you sure you want to delete this slider and all of it's data?" data-redirect="enupalslider/sliders">
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>

{% endblock %}

